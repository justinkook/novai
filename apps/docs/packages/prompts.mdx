---
title: "@novai/prompts"
description: "Prompt templates and management system for NovAI game engine"
---

# @novai/prompts

The prompts package provides a comprehensive system for managing and customizing prompt templates used by the NovAI game engine. This package includes pre-built templates for various game scenarios and tools for creating custom prompts.

## Installation

```bash
npm install @novai/prompts
# or
pnpm add @novai/prompts
```

## Quick Start

```typescript
import { PromptTemplate, DND5ePrompts } from '@novai/prompts';

// Use pre-built D&D 5e prompts
const dndPrompts = new DND5ePrompts();

// Get a system prompt for a specific scenario
const systemPrompt = dndPrompts.getSystemPrompt({
  campaign: 'baldurs-gate-3',
  playerLevel: 3,
  context: 'combat'
});

// Create a custom prompt template
const customPrompt = new PromptTemplate({
  name: 'custom-adventure',
  systemTemplate: 'You are a {style} Game Master...',
  userTemplate: 'Player: {input}\nContext: {context}'
});
```

## Core Components

### PromptTemplate

Base class for creating custom prompt templates.

```typescript
export class PromptTemplate {
  constructor(config: PromptTemplateConfig)
  
  renderSystemPrompt(variables: Record<string, string>): string
  renderUserPrompt(variables: Record<string, string>): string
  validateVariables(variables: Record<string, string>): boolean
}
```

### DND5ePrompts

Pre-built prompt templates for Dungeons & Dragons 5th Edition.

```typescript
export class DND5ePrompts {
  getSystemPrompt(context: DNDContext): string
  getUserPrompt(input: string, gameState: GameState): string
  getCombatPrompt(enemies: string[], playerStats: Record<string, number>): string
  getStatCheckPrompt(stat: string, difficulty: number): string
}
```

### PromptManager

Centralized prompt management system.

```typescript
export class PromptManager {
  constructor(templatesPath?: string)
  
  registerTemplate(template: PromptTemplate): void
  getTemplate(name: string): PromptTemplate | null
  listTemplates(): string[]
  loadTemplatesFromDirectory(path: string): Promise<void>
}
```

## Types

### Prompt Configuration

```typescript
interface PromptTemplateConfig {
  name: string;
  systemTemplate: string;
  userTemplate: string;
  variables?: string[];
  description?: string;
}

interface DNDContext {
  campaign: string;
  playerLevel?: number;
  context?: 'exploration' | 'combat' | 'dialogue' | 'social';
  companions?: string[];
  location?: string;
}
```

### Prompt Variables

```typescript
interface PromptVariables {
  campaign: string;
  playerName: string;
  playerLevel: number;
  currentLocation: string;
  companions: string[];
  inventory: string[];
  stats: Record<string, number>;
  recentChoices: string[];
  timeOfDay?: string;
  weather?: string;
  mood?: string;
}
```

## Usage Examples

### Using Pre-built Templates

```typescript
import { DND5ePrompts } from '@novai/prompts';

const dndPrompts = new DND5ePrompts();

// Get system prompt for exploration
const systemPrompt = dndPrompts.getSystemPrompt({
  campaign: 'baldurs-gate-3',
  playerLevel: 5,
  context: 'exploration'
});

// Get user prompt for player input
const userPrompt = dndPrompts.getUserPrompt(
  'I want to explore the ancient ruins',
  gameState
);

// Get combat-specific prompt
const combatPrompt = dndPrompts.getCombatPrompt(
  ['Goblin Warrior', 'Goblin Archer'],
  { strength: 16, dexterity: 14, constitution: 12 }
);
```

### Creating Custom Templates

```typescript
import { PromptTemplate } from '@novai/prompts';

// Create a custom fantasy prompt template
const fantasyPrompt = new PromptTemplate({
  name: 'fantasy-adventure',
  systemTemplate: `You are a master storyteller running a {genre} adventure.

CAMPAIGN: {campaign}
STYLE: {style}
TONE: {tone}

RULES:
- Use {perspective} narration
- Provide {choiceCount} meaningful choices
- Include {mechanics} when relevant
- Maintain {consistency} throughout the story`,
  userTemplate: `PLAYER: {playerName}
LOCATION: {location}
INVENTORY: {inventory}
COMPANIONS: {companions}

INPUT: {input}

Respond as the Game Master, continuing the narrative.`,
  variables: ['genre', 'style', 'tone', 'perspective', 'choiceCount', 'mechanics', 'consistency']
});

// Use the custom template
const systemPrompt = fantasyPrompt.renderSystemPrompt({
  genre: 'high fantasy',
  style: 'epic',
  tone: 'dramatic',
  perspective: 'second-person',
  choiceCount: '3-4',
  mechanics: 'stat checks and combat',
  consistency: 'character development and world-building'
});

const userPrompt = fantasyPrompt.renderUserPrompt({
  playerName: 'Aragorn',
  location: 'Rivendell',
  inventory: 'sword, bow, elven cloak',
  companions: 'Gandalf, Legolas',
  input: 'I want to investigate the ancient scrolls'
});
```

### Prompt Management

```typescript
import { PromptManager, PromptTemplate } from '@novai/prompts';

const manager = new PromptManager('./prompts');

// Register a custom template
const customTemplate = new PromptTemplate({
  name: 'cyberpunk-adventure',
  systemTemplate: 'You are a cyberpunk Game Master...',
  userTemplate: 'Player: {input}\nAugmentations: {augs}'
});

manager.registerTemplate(customTemplate);

// Get a template by name
const template = manager.getTemplate('cyberpunk-adventure');
if (template) {
  const prompt = template.renderSystemPrompt({});
}

// List all available templates
const templates = manager.listTemplates();
console.log('Available templates:', templates);
```

### Dynamic Prompt Generation

```typescript
import { DynamicPromptBuilder } from '@novai/prompts';

const builder = new DynamicPromptBuilder();

// Build a context-aware prompt
const prompt = builder
  .setCampaign('baldurs-gate-3')
  .setPlayerLevel(5)
  .setContext('combat')
  .setEnemies(['Orc Warrior', 'Orc Shaman'])
  .setPlayerStats({ strength: 16, dexterity: 14 })
  .setLocation('Goblin Cave')
  .setTimeOfDay('night')
  .build();

console.log(prompt.systemPrompt);
console.log(prompt.userPrompt);
```

## Pre-built Templates

### D&D 5e Templates

```typescript
// Exploration Template
const explorationPrompt = dndPrompts.getSystemPrompt({
  campaign: 'lost-mines-of-phandelver',
  context: 'exploration',
  playerLevel: 3
});

// Social Interaction Template
const socialPrompt = dndPrompts.getSystemPrompt({
  campaign: 'curse-of-strahd',
  context: 'dialogue',
  playerLevel: 7
});

// Combat Template
const combatPrompt = dndPrompts.getSystemPrompt({
  campaign: 'storm-kings-thunder',
  context: 'combat',
  playerLevel: 10
});
```

### Custom Game Templates

```typescript
// Sci-Fi Template
const scifiPrompt = new PromptTemplate({
  name: 'scifi-adventure',
  systemTemplate: `You are a sci-fi Game Master running a {setting} adventure.

TECHNOLOGY LEVEL: {techLevel}
SETTING: {setting}
STYLE: {style}

RULES:
- Use futuristic technology and terminology
- Include cybernetics and AI when relevant
- Handle space travel and alien encounters
- Maintain scientific plausibility`,
  userTemplate: `PLAYER: {playerName}
SHIP: {ship}
EQUIPMENT: {equipment}
LOCATION: {location}

INPUT: {input}`
});

// Horror Template
const horrorPrompt = new PromptTemplate({
  name: 'horror-adventure',
  systemTemplate: `You are a horror Game Master creating a {subgenre} experience.

ATMOSPHERE: {atmosphere}
THREAT LEVEL: {threatLevel}
SANITY MECHANICS: {sanity}

RULES:
- Build tension and suspense gradually
- Use atmospheric descriptions
- Include psychological horror elements
- Maintain player agency while creating fear`,
  userTemplate: `PLAYER: {playerName}
SANITY: {sanity}
LOCATION: {location}
PREVIOUS ENCOUNTERS: {encounters}

INPUT: {input}`
});
```

## Advanced Features

### Conditional Prompts

```typescript
import { ConditionalPromptTemplate } from '@novai/prompts';

const conditionalPrompt = new ConditionalPromptTemplate({
  name: 'adaptive-adventure',
  conditions: [
    {
      condition: (gameState) => gameState.currentLocation.includes('dungeon'),
      template: 'You are in a dark dungeon...'
    },
    {
      condition: (gameState) => gameState.companions.length > 0,
      template: 'With your companions by your side...'
    },
    {
      condition: (gameState) => gameState.inventory.includes('magic_sword'),
      template: 'Your magic sword glows with power...'
    }
  ],
  defaultTemplate: 'You continue your adventure...'
});

const prompt = conditionalPrompt.render(gameState);
```

### Multi-language Support

```typescript
import { LocalizedPromptTemplate } from '@novai/prompts';

const localizedPrompt = new LocalizedPromptTemplate({
  name: 'multilingual-adventure',
  templates: {
    en: {
      systemTemplate: 'You are an English Game Master...',
      userTemplate: 'Player: {input}'
    },
    es: {
      systemTemplate: 'Eres un Maestro de Juego en español...',
      userTemplate: 'Jugador: {input}'
    },
    fr: {
      systemTemplate: 'Vous êtes un Maître de Jeu français...',
      userTemplate: 'Joueur: {input}'
    }
  }
});

const englishPrompt = localizedPrompt.render('en', { input: 'Hello' });
const spanishPrompt = localizedPrompt.render('es', { input: 'Hola' });
```

### Prompt Validation

```typescript
import { PromptValidator } from '@novai/prompts';

const validator = new PromptValidator();

// Validate a prompt template
const isValid = validator.validateTemplate(fantasyPrompt);
if (!isValid) {
  console.log('Validation errors:', validator.getErrors());
}

// Validate variables
const variables = {
  genre: 'fantasy',
  style: 'epic',
  playerName: 'Aragorn'
};

const validVariables = validator.validateVariables(fantasyPrompt, variables);
if (!validVariables) {
  console.log('Missing variables:', validator.getMissingVariables());
}
```

## Performance Optimization

### Prompt Caching

```typescript
import { CachedPromptManager } from '@novai/prompts';

const cachedManager = new CachedPromptManager();

// Cache frequently used prompts
const systemPrompt = await cachedManager.getSystemPrompt('dnd-5e', {
  campaign: 'baldurs-gate-3',
  context: 'exploration'
});

// The prompt will be cached for future use
const cachedPrompt = await cachedManager.getSystemPrompt('dnd-5e', {
  campaign: 'baldurs-gate-3',
  context: 'exploration'
}); // Returns cached version
```

### Template Compilation

```typescript
import { CompiledPromptTemplate } from '@novai/prompts';

// Pre-compile templates for better performance
const compiledTemplate = new CompiledPromptTemplate({
  name: 'optimized-adventure',
  systemTemplate: 'You are a {style} Game Master...',
  userTemplate: 'Player: {input}'
});

// Compiled templates are faster to render
const prompt = compiledTemplate.render({
  style: 'epic',
  input: 'I want to explore'
});
```

## Testing

### Unit Tests

```typescript
import { PromptTemplate, DND5ePrompts } from '@novai/prompts';

describe('Prompt Templates', () => {
  it('should render system prompts correctly', () => {
    const template = new PromptTemplate({
      name: 'test',
      systemTemplate: 'You are a {style} Game Master',
      userTemplate: 'Player: {input}'
    });

    const systemPrompt = template.renderSystemPrompt({ style: 'epic' });
    expect(systemPrompt).toBe('You are a epic Game Master');
  });

  it('should validate variables', () => {
    const template = new PromptTemplate({
      name: 'test',
      systemTemplate: 'You are a {style} Game Master',
      userTemplate: 'Player: {input}',
      variables: ['style', 'input']
    });

    const isValid = template.validateVariables({ style: 'epic' });
    expect(isValid).toBe(false); // Missing 'input' variable
  });
});
```

### Integration Tests

```typescript
describe('DND5ePrompts Integration', () => {
  it('should generate appropriate prompts for different contexts', () => {
    const dndPrompts = new DND5ePrompts();

    const explorationPrompt = dndPrompts.getSystemPrompt({
      campaign: 'test',
      context: 'exploration'
    });

    const combatPrompt = dndPrompts.getSystemPrompt({
      campaign: 'test',
      context: 'combat'
    });

    expect(explorationPrompt).toContain('exploration');
    expect(combatPrompt).toContain('combat');
  });
});
```

## API Reference

### PromptTemplate

#### Constructor

```typescript
constructor(config: PromptTemplateConfig)
```

#### Methods

```typescript
renderSystemPrompt(variables: Record<string, string>): string
renderUserPrompt(variables: Record<string, string>): string
validateVariables(variables: Record<string, string>): boolean
```

### DND5ePrompts

#### Methods

```typescript
getSystemPrompt(context: DNDContext): string
getUserPrompt(input: string, gameState: GameState): string
getCombatPrompt(enemies: string[], playerStats: Record<string, number>): string
getStatCheckPrompt(stat: string, difficulty: number): string
```

### PromptManager

#### Constructor

```typescript
constructor(templatesPath?: string)
```

#### Methods

```typescript
registerTemplate(template: PromptTemplate): void
getTemplate(name: string): PromptTemplate | null
listTemplates(): string[]
loadTemplatesFromDirectory(path: string): Promise<void>
```

## Contributing

1. Fork the repository
2. Create a feature branch
3. Add your prompt templates
4. Include tests for new templates
5. Submit a pull request

## License

MIT License - see LICENSE file for details. 