---
title: "Game Engine Overview"
description: "Learn about the core concepts and architecture of the NovAI game engine"
---

# Game Engine Overview

The NovAI game engine is the heart of the platform, providing AI-powered tabletop RPG experiences. It combines intelligent narrative generation with robust game state management to create immersive, dynamic gameplay.

## Core Components

### GameEngineService

The main orchestrator that processes player input and generates AI responses.

```typescript
import { GameEngineService } from "@novai/engine";

const engine = new GameEngineService(llmConfig, campaignsPath);
const response = await engine.processGameRequest({
  gameState,
  playerInput,
  context,
});
```

### Key Features

- **AI Game Master**: Intelligent narrative generation that adapts to player choices
- **Campaign Management**: Load and manage custom campaigns with rich world-building
- **Prompt-driven Mechanics**: D&D 5e-flavored prompts and engine mechanics
- **Real-time State Management**: Persistent game state with character progression
- **Dynamic Choices**: AI-generated meaningful choices based on context
- **Stat Checks**: Automatic stat check generation and resolution
- **Combat System**: Turn-based combat with AI-driven enemy behavior

## Architecture Flow

<Steps>
  <Step title="Player Input">
    Player submits action or dialogue through the interface
  </Step>
  <Step title="Request Processing">
    GameEngineService receives the request with current game state
  </Step>
  <Step title="Campaign Loading">
    Loads campaign data and ruleset information
  </Step>
  <Step title="Prompt Building">
    Constructs system and user prompts with context
  </Step>
  <Step title="AI Generation">
    Calls LLM service with prompts and narrative memory
  </Step>
  <Step title="Response Parsing">
    Extracts narration, choices, stat checks, and combat info
  </Step>
  <Step title="State Update">
    Updates game state with new narrative entries
  </Step>
  <Step title="Response Return">Returns structured response to the client</Step>
</Steps>

## Game State Management

The engine maintains a comprehensive game state that includes:

- **Player Information**: Name, stats, inventory, companions
- **Campaign Context**: Current location, plot progress, world state
- **Narrative History**: Complete conversation and action history
- **Game Mechanics**: Stat checks, combat state, choice history

```typescript
interface GameState {
  id: string;
  campaignId: string;
  playerName: string;
  currentLocation: string;
  companions: string[];
  inventory: string[];
  stats: Record<string, number>;
  choices: string[];
  narrative: NarrativeEntry[];
  metadata?: Record<string, unknown>;
}
```

## LLM Integration

The engine supports multiple LLM providers:

- **OpenAI**: GPT-4, GPT-3.5-turbo, and other OpenAI models
- **Local Models**: Ollama, local LLM servers
- **Custom Providers**: Extensible provider system

```typescript
interface LLMConfig {
  provider: "openai" | "local";
  apiKey?: string;
  model?: string;
  baseUrl?: string;
}
```

## Campaign System

Campaigns define the world, characters, and story elements:

- **World Building**: Locations, NPCs, plot points
- **Character Development**: Companions, relationships, backstory
- **Ruleset Integration**: Game mechanics and rule systems
- **Dynamic Content**: AI-generated content based on campaign context

## Next Steps

- Learn about the [Game State Management](/engine/game-state)
- Explore [Campaign Creation](/engine/campaigns)
- Understand [LLM Integration](/engine/llm-integration)
- Run the agents listed in `langgraph.json` and try the web app integration
